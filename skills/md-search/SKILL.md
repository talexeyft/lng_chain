---
name: md-search
description: Поиск по локальной документации в Markdown. Используй, когда запрос связан с содержимым .md файлов, документами из MD_DOCUMENTS_PATH или конвертированными PDF-материалами.
compatibility: Для семантического поиска нужна локальная модель Ollama qwen3-embedding:4b и файл ai_data/md_semantic_index.jsonl
allowed-tools: search_md_docs, search_md_docs_semantic
---

# md-search

## Overview

Навык для быстрого поиска по локальной базе Markdown-документов.

## Instructions

1. Всегда запускай оба инструмента для одного запроса:
   - `search_md_docs` (точные совпадения по тексту),
   - `search_md_docs_semantic` (поиск по смыслу).
2. После получения результатов объединяй выдачу:
   - убирай дубликаты по `path`,
   - приоритет отдавай результатам, где есть и точное, и семантическое совпадение,
   - если есть конфликт, оценивай, что ближе к исходному запросу по смыслу и формулировке.
3. Если семантический индекс отсутствует, сообщи пользователю команду:
   - `python tools/md_search.py semantic-index`
4. В ответе всегда показывай:
   - какие файлы найдены;
   - короткие релевантные фрагменты;
   - почему выбранные результаты ближе к исходному запросу;
   - при необходимости уточняющий вопрос по теме поиска.

## Output format

- Краткий итог (1-2 предложения).
- Совпадения списком: `путь`, `фрагмент`, `тип совпадения` (`fulltext`, `semantic`, `both`), для семантического поиска — `score`.
- Если релевантность низкая, предложи переформулировать запрос.
